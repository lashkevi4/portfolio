<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tickets online</title>
    <link rel="stylesheet" href="../reset.css" />
    <link rel="stylesheet" href="./buy-tickets.css" />
    <script src="https://kit.fontawesome.com/ecf5de3203.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <!-- HEADER -->
    <header>
      <figure>
        <img src="../images/company-logo.png" alt="Company logo" />
      </figure>
      <section>
        <h1>Company</h1>
        <h3>Tickets online</h3>
      </section>
    </header>
    <!-- NAV -->
    <nav>
      <ul>
        <li><a href="../home-page/index.html" id="home">Home</a></li>
        <li><a href="../about-page/about-page.html" id="about">About</a></li>
        <li><a href="../contact-page/contact-page.html" id="contact">Contact</a></li>
      </ul>
    </nav>
    
    <!-- IMAGE AND DESCRIBE -->
    <div class="container">

      <section class="concert">
        <figure>
          <img id="img" src="" alt="Some Photo" />
        </figure>
        <p id="description">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Possimus
          impedit reiciendis, autem rem fugit vel enim, fugiat a obcaecati
          voluptates quidem temporibus quis hic repudiandae molestiae atque
          explicabo veritatis eaque facilis facere! Repellendus perspiciatis
          fugiat rem veritatis facilis est soluta deleniti excepturi magnam, quam
          error assumenda, doloremque placeat commodi nam.
        </p>
      </section>
      <!-- TICKETS CHOOSE -->
      <div class="buy-tickets-tc-ci">
      <section class="tickets-choose">
        <table>
          <tbody>
            <tr>
              <td colspan="4" class="options"><h2>Normal price</h2></td>
            </tr>
              <tr>
            <td colspan="1" rowspan="2" class="price-width"><span id="adult-price"></span>€/ticket</td>
            <td colspan="1" rowspan="2" class="ticket-width"><span value="0" id="count">0</span> tickets</td>
            <td><button id="plus" >+</button></td>
            <td rowspan="2" class="sum-width"><span id="sum">0</span>€</td>
          </tr>
          <tr>
            <td><button id="minus" >-</button></td>
          </tr>
        </tbody>
       </table>
  
       <table>
        <tbody>
          <td class="options" colspan="4"> <h2>Elders, unempoyments, students</h2></td>
          <tr>
            <td rowspan="2" class="price-width"><span id="price">0</span>€/ticket</td>
            <td rowspan="2" class="ticket-width"><span id="count">0</span> tickets</td>
            <td><button >+</button></td>
            <td rowspan="2" class="sum-width"><span id="sum">0</span>€</td>
          </tr>
          <tr>
            <td><button>-</button></td>
          </tr>
  
        </tbody>
       </table>
      </section>
  
      <!-- CONTACT INFORMATION -->
      <section class="contact__information">
        <form action="">
          <div class="group">
            <input type="text" placeholder="Name" required>
            <label for="fname">Name</label>
          </div>
  
          <div class="group">
            <input type="text" placeholder="Surname" required>
            <label for="sname">Surname</label>
          </div>
  
  
          <div class="group">
            <input type="text" placeholder="E-mail" required>
            <label for="e-mail">E-mail</label>
          </div>
  
          <div class="group">
            <input type="text" placeholder="Address" required>
            <label for="adress">Adress</label>
          </div>
  
          <div class="group">
            <input type="text" placeholder="City" required>
            <label for="city">City</label>
          </div>
  
          <div class="group">
            <input type="text" placeholder="Country" required>
            <label for="country">Country</label>
          </div>
  
          <div class="group">
            <input type="phone" placeholder="Phone number" required>
            <label for="phone">Phone number</label>
          </div>
        </form>
        <hr>
        <h2>TOTAL <span id="total">0</span>€</h2>
      </section>
    </div>
    <div class="back">
      <i class="fa-solid fa-angle-left"></i>
      <button class="back-button" id="backButton">Back</button>
    </div>
    <button class="pay-button" type="submit" > Confirm order & pay</button>
    </div>



    <script>
      async function loadCity() {
        let data = await fetch("../bands.json").then((response) =>
          response.json()
        );
        let url = new URL(window.location.href);
        let description = document.getElementById("description");
        let bandId = url.searchParams.get("id");
        const img = document.getElementById("img");
        const price = document.getElementById("price");
        const adultPrice = document.getElementById("adult-price")
        const backBTN = document.getElementById("backButton");
        const plusBTN = document.getElementById("plus");
        const minusBTN = document.getElementById("minus");
        const total = document.getElementById("total");

        let countToNum = parseInt(document.getElementById("count").innerHTML)
        const countID = document.getElementById("count");
        let summary = document.getElementById("sum");
        let priceA = data.bands[bandId].adultprice;

        img.src = data.bands[bandId].image;
        description.textContent = data.bands[bandId].description;
        price.textContent = data.bands[bandId].price;
        adultPrice.textContent = data.bands[bandId].adultprice;
        
        backBTN.addEventListener('click', function(){
          window.history.back();
        });
        
        plusBTN.addEventListener('click', function(){
        let sum = 0;
        countToNum += 1;
        countID.innerHTML = countToNum;
        sum = priceA * countToNum;
        summary.textContent = sum;
        total.innerHTML = summary.innerHTML;
        });

        minusBTN.addEventListener('click', function(){
        let sum = 0;
        if (countToNum != 0)
        {
          countToNum -= 1;
        }
        countID.innerHTML = countToNum;
        sum = priceA * countToNum;
        summary.textContent = sum;
        total.innerHTML = summary.innerHTML;
        });

      

      }
      loadCity();
      
    </script>
</body>